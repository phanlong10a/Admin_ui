import {
  Grid,
  FormControl,
  InputLabel,
  Button,
  Icon,
  Input,
  Checkbox,
  TablePagination,
  InputAdornment,
  Dialog,
  TextField,
  DialogActions,
  IconButton
} from "@material-ui/core";
import React, { Component } from "react";
import SearchIcon from "@material-ui/icons/Search";
import MaterialTable, {
  MTableToolbar,
} from "material-table";
import { useTranslation} from 'react-i18next';
import Autocomplete from '@material-ui/lab/Autocomplete';
import { searchByPageDto, getItemById, healthOrganizationSearchByPage } from "./SampleService";
import DialogContent from "@material-ui/core/DialogContent";
import DialogTitle from "@material-ui/core/DialogTitle";
import Draggable from "react-draggable";
import Paper from "@material-ui/core/Paper";
import { is } from "date-fns/locale";
import moment from 'moment';
import authService from "../../services/jwtAuthService";
import UserRoles from "app/services/UserRoles";
import { getAllOrgByUserId } from "../User/UserService";
import DateFnsUtils from "@date-io/date-fns";
import { KeyboardDatePicker, MuiPickersUtilsProvider } from "@material-ui/pickers";
import { searchByPage as getAllSusLevel } from "../SuspectedLevelLevel/SuspectedLevelLevelService";
import { searchByDto as getAllEpiFactor} from "../EpidemiologicalFactors/EpidemiologicalFactorsService";
function MaterialButton(props) {
  const { t, i18n } = useTranslation();
  const item = props.item;
  return <div>
    <IconButton onClick={() => props.onSelect(item, 0)}>
      <Icon color="primary">edit</Icon>
    </IconButton>
    {/* <IconButton onClick={() => props.onSelect(item, 1)}>
            <Icon color="error">delete</Icon>
        </IconButton> */}
  </div>;
}

function PaperComponent(props) {
  return (
    <Draggable
      handle="#draggable-dialog-title"
      cancel={'[class*="MuiDialogContent-root"]'}
    >
      <Paper {...props} />
    </Draggable>
  );
}
class SelectSamplePopup extends React.Component {
  // constructor(props) {
  //   super(props);
  //   this.handleChange = this.handleChange.bind(this);
  // }

  state = {
    keyword: null,
    rowsPerPage: 10,
    page: 0,
    item: {},
    shouldOpenEditorDialog: false,
    shouldOpenConfirmationDialog: false,
    itemList: [],
    totalElements: 0,
    shouldOpenConfirmationDeleteAllDialog: false,
    shouldOpenImportExcelDialog: false,
    labTest: null,
    labTestList: [],
    collectSampleOrg: null,
    sampleCollectOrgList: [],
    userOrgType: 0,
    fromDate: null,
    toDate: null,
    resultSampleSearch: null,
    errorDate: "",
    listSampleChoose: [],
    shouldOpenListSamplePopup: false,
    checkAll: false,
    selectedItem:{},
    sampleSusLevel: [],
    susLevel: null,
    sampleEpiFactor: [],
    epiFactor: null
  };

  listResultSample = [
    { result: null, id: "Tất cả" },
    { result: "Positive", id: "Dương tính" },
    { result: "Checking", id: "Dương tính chờ xác nhận" },
    { result: "Negative", id: "Âm tính" },
  ]

  handleTextChange(event) {
    this.setState({ keyword: event.target.value })
  }

  handleKeyDownEnterSearch = (e) => {
    if (e.key === 'Enter') {
      this.search()
    }
  }

  //TODO càn code lai, viet nhanh de tam nhu nay
  healthOrganizationSearchByPage = () => {
    healthOrganizationSearchByPage({ pageIndex: 0, pageSize: 100000, orgType: 1 }).then(({ data }) => {
      this.setState({ labTestList: data?.content })
    });
  }
  sampleCollectOrgSearchByPage = () => {
    healthOrganizationSearchByPage({ pageIndex: 0, pageSize: 100000, orgType: 2 }).then(({ data }) => {
      this.setState({ sampleCollectOrgList: data?.content })
    });
  }

  sampleSusLevelSearchByPage = () => {
    getAllSusLevel({pageIndex: 0, pageSize: 100000}).then(({data}) => {
      this.setState({ sampleSusLevel: data?.content })
    })
  }

  sampleEpiFactorSearchByPage = () => {
    getAllEpiFactor({pageIndex: 0, pageSize: 100000}).then(({data}) => {
      this.setState({ sampleEpiFactor: data?.content })
    })
  }

  componentDidMount() {
    this.updatePageData();
    this.healthOrganizationSearchByPage();
    this.sampleCollectOrgSearchByPage();
    this.sampleSusLevelSearchByPage();
    this.sampleEpiFactorSearchByPage();
    if (!UserRoles.isAdmin()) {
      this.getUserOrgType();
    }
  }

  getUserOrgType() {
    let user = authService.getLoginUser()
    if (user != null) {
      getAllOrgByUserId(user.id).then(({ data }) => {
        if (data != null && data.org != null)
          this.setState({ userOrgType: data.org.orgType })
      });
    }

  }

  getListItemChild(item) {
    var result = [];
    var root = {};
    root.name = item.name;
    root.description = item.description;
    root.code = item.code;
    root.icon = item.icon;
    root.path = item.path;
    root.id = item.id;
    root.parentId = item.parentId;
    result.push(root);
    if (item.children) {
      item.children.forEach(child => {
        var childs = this.getListItemChild(child);
        result.push(...childs);
      });
    }
    return result;
  }

  selectHealthOrganization = (event, value, source) => {
    if (source == "labTest") {
      this.setState({ labTest: value }, function () {
        this.search();
      });
    }
    if (source == "collectSampleOrg") {
      this.setState({ collectSampleOrg: value }, () => {
        this.search();
      })
    }

  }

  updatePageData = () => {
    var searchObject = {}
    searchObject.keyword = null
    searchObject.pageIndex = this.state.page + 1
    searchObject.pageSize = this.state.rowsPerPage
    searchObject.isChidren = true; //lấy mẫu gộp
    searchObject.collectSampleOrg = this.state.collectSampleOrg;
    searchObject.labTest = this.state.labTest;
    searchObject.text = this.state.keyword;
    searchObject.fromDate = this.state.fromDate;
    searchObject.toDate = this.state.toDate;
    searchObject.sampleResult = this.state.resultSampleSearch;
    searchObject.isUpdateSampleResult = false;
    searchByPageDto(searchObject, this.state.page, this.state.rowsPerPage).then(({ data }) => {
      //  let itemListClone = [...data.content];
      //  if(this.state.checkAll){
      //    itemListClone.map((item) => {
      //      item.isCheck = true
      //   })  
      // }
      // this.setState({ itemList: itemListClone, totalElements: data.totalElements})

       let { listSampleChoose } = this.state;
       let itemListClone = [...data.content];
       let number = 0;
       let indexNuber = 0;
       itemListClone.map(item => {
         const found = listSampleChoose.find(
           obj => obj.id == item.id
         );
         if (found) {
           item.isCheck = true;
           number++;
         } else {
           item.isCheck = false;
         }
         indexNuber++;
       });
       if (number == indexNuber) {
         this.setState({ itemList: itemListClone, totalElements: data.totalElements, checkAll: true })
       } else {
         this.setState({ itemList: itemListClone, totalElements: data.totalElements, checkAll: false })
       }
      //  this.setState({ itemList: itemListClone, totalElements: data.totalElements })
    })
  }
  setPage = (page) => {
    this.setState({ page }, function () {
      this.updatePageData()
    })
  }

  setRowsPerPage = (event) => {
    this.setState({ rowsPerPage: event.target.value, page: 0 }, function () {
      this.updatePageData()
    })
  }

  handleChangePage = (event, newPage) => {
    this.setPage(newPage)
  }

  handleOKEditClose = () => {
    this.setState(
      {
        shouldOpenEditorDialog: false,
        shouldOpenConfirmationDialog: false,
      },
      () => {
        this.search()
      }
    )
  }

  handleDelete = (id) => {
    this.setState({
      id,
      shouldOpenConfirmationDialog: true,
    })
  }
  handleDialogClose = () => {
    this.setState(
      {
        shouldOpenEditorDialog: false,
        shouldOpenConfirmationDialog: false,
        shouldOpenConfirmationDeleteAllDialog: false,
        shouldOpenNotificationPopup: false,
        shouldOpenImportExcelDialog: false,
        shouldOpenListSamplePopup: false,
        data: [],
      },
      () => {
        this.search()
      }
    )
  }

  handleOKEditClose = () => {
    this.setState({
      shouldOpenEditorDialog: false,
      shouldOpenConfirmationDialog: false,
      shouldOpenConfirmationDeleteAllDialog: false,
      shouldOpenImportExcelDialog: false,
      shouldOpenListSamplePopup: false,
    }, () => {
      this.search()
    })
    // this.setPage(0)
  }

  handleDelete = (id) => {
    this.setState({
      id,
      shouldOpenConfirmationDialog: true,
    })
  }

  handleConfirmationResponse = () => {
    if (this.state.itemList.length === 1 && this.state.page === 1) {
      let count = this.state.page - 1
      this.setState({
        page: count,
      })
    }
    // deleteItem(this.state.id).then(() => {
    //     this.updatePageData();
    //     this.handleDialogClose()
    // })
  }
  handleEditItem = (item) => {
    this.setState({
      item: item,
      shouldOpenEditorDialog: true,
    })

  }
  handleDeleteButtonClick = () => {
    if (
      typeof this.state.data === 'undefined' ||
      this.state.data.length === 0
    ) {
      this.setState({
        shouldOpenNotificationPopup: true,
        Notification: "general.noti_check_data"
      })
    } else {
      this.setState({ shouldOpenConfirmationDeleteAllDialog: true })
    }
  }

  handleDeleteAll = (event) => {
    this.handleDeleteList(this.state.data).then(() => {
      this.updatePageData()
    })
  }
  handleTextChange = event => {
    this.setState({ keyword: event.target.value }, function () {
    })
  };

  handleKeyDownEnterSearch = e => {
    if (e.key === 'Enter') {
      this.search();
    }
  };

  search() {
    this.setState({ page: 0 }, function () {
      var searchObject = {};
      searchObject.collectSampleOrg = this.state.collectSampleOrg;
      searchObject.labTest = this.state.labTest;
      searchObject.text = this.state.keyword;
      searchObject.pageIndex = this.state.page + 1;
      searchObject.pageSize = this.state.rowsPerPage;
      searchObject.isChidren = true; //lấy mẫu gộp
      searchObject.fromDate = this.state.fromDate;
      searchObject.toDate = this.state.toDate;
      searchObject.sampleResult = this.state.resultSampleSearch;
      searchObject.isUpdateSampleResult = false;
      searchByPageDto(searchObject, this.state.page, this.state.rowsPerPage).then(({ data }) => {
        let { listSampleChoose } = this.state;
        let itemListClone = [...data.content];
        itemListClone.map(item => {
          const found = listSampleChoose.find(
            obj => obj.id == item.id
          );
          if (found) {
            item.isCheck = true;
          } else {
            item.isCheck = false;
          }
        });
        this.setState({ itemList: itemListClone, totalElements: data.totalElements })
      });
    });
  }
  timeConverter(UNIX_timestamp) {
    var a = new Date(UNIX_timestamp);
    var months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];
    var year = a.getFullYear();
    var month = months[a.getMonth()];
    var date = a.getDate();
    // var time = date + '/' + month + '/' + year;
    var time = year
    return time;
  }

  handleDateChange = (event, source) => {
    if (source === "toDate" || source === "fromDate") {
      if (source === "fromDate" && event != null) {
        event.setHours("00");
        event.setMinutes("00");
        event.setSeconds("00");
      }
      if (source === "toDate" && event != null) {
        event.setHours("23");
        event.setMinutes("59");
        event.setSeconds("00");
      }
      this.setState({ [source]: event }, () => {
        let fd = this.state.fromDate;
        let td = this.state.toDate;
        if ((fd != null) && (td != null)) {
          if (fd > td) {
            this.setState({ errorDate: "ngày kết thúc phải trước ngày bắt đầu" })
          } else {
            this.setState({ errorDate: "" })
            this.search()
          }
        } else {
          this.search()
        }
      })
    }
  }

  handleClick = (event, item) => {
    item.isCheck = event.target.checked;
    let { listSampleChoose } = this.state;
    if (listSampleChoose == null) {
      listSampleChoose = [];
    }
    if (listSampleChoose != null && listSampleChoose.length == 0 && item.isCheck == true) {
      listSampleChoose.push(item);
    } else {
      let itemInList = false;
      listSampleChoose.forEach(el => {
        if (el.id == item.id) {
          itemInList = true;
        }
      });
      if (!itemInList && item.isCheck == true) {
        listSampleChoose.push(item);
      } else {
        if (item.isCheck === false) {
          listSampleChoose = listSampleChoose.filter(
            proper => proper.id !== item.id
          );
        }
      }
    }
    this.setState({ listSampleChoose });
  };
  handleClickAll = () => {
    let check = this.state.checkAll;
    this.setState({ checkAll: !check})
    var searchObject = {}
    searchObject.keyword = null
    searchObject.pageIndex = this.state.page + 1
    searchObject.pageSize = this.state.totalElements
    searchObject.isChidren = true; //lấy mẫu gộp
    searchObject.collectSampleOrg = this.state.collectSampleOrg;
    searchObject.labTest = this.state.labTest;
    searchObject.text = this.state.keyword;
    searchObject.fromDate = this.state.fromDate;
    searchObject.toDate = this.state.toDate;
    searchObject.sampleResult = this.state.resultSampleSearch;

    let listCheck = this.state.itemList;
    searchByPageDto(searchObject, this.state.page, this.state.rowsPerPage).then(({ data }) => {
      let listSampleChoose = [...data.content];
      listCheck.map((item) => {
        const found = listSampleChoose.find(
          obj => obj.id == item.id
        );
        if (this.state.checkAll == true && found) {
          item.isCheck = true;
        } else {
          listSampleChoose = [];
          item.isCheck = false;
        }
      })
      this.setState({ listSampleChoose: listSampleChoose, itemList: listCheck})
    })
  }
  handleChange = (event, source) => {
    event.persist();
    this.setState({
      [event.target.name]: event.target.value
    });
  };

  componentWillMount() {
    let { open, handleClose, selectedItem, listSamplePick} = this.props;
    if (listSamplePick != null && listSamplePick.length > 0) {
      const sampleCommon = [...listSamplePick];
      this.setState({ listSampleChoose: sampleCommon });
    }

  }

  selectSearchSample = (event, value, source) => {
    if(source == "susLevel") {
      this.setState({ susLevel: value }, function () {
        this.search();
      });
    }
   if(source == "epiFactor") {
    this.setState({ epiFactor: value }, function () {
      this.search();
    });
   }
  }

  render() {

    const { t, i18n, handleClose, handleSelect, open } = this.props;
    let {
      text,
      itemList,
      keyword,
      fromDate,
      toDate,
      sampleCollectOrgList,
      checkAll,
      listSampleChoose,
      sampleSusLevel,
      sampleEpiFactor
    } = this.state;
    let searchObject = { pageIndex: 0, pageSize: 100000 }
    let TitlePage = t('sample.title2')
    let columns = [
      {
        title: t("general.select"),
        field: "custom",
        align: "left",
        width: "250",
        render: rowData => (
          <Checkbox
            id={`radio${rowData.id}`}
            name="radSelected"
            value={rowData.id}
            checked={rowData.isCheck}
            onClick={event => this.handleClick(event, rowData)}
          />
        )
      },
      {
        title: t('sample.code'), field: 'code', width: '150',
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },
      },

      {
        title: t('Ngày lấy mẫu'), field: 'sampleDate', width: '150',
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },
        render: rowData =>
          (rowData.sampleDate) ? <span>{moment(rowData.sampleDate).format('DD/MM/YYYY')}</span> : ''
      },
      {
        title: t('Ngày gửi mẫu'), field: 'shipDate', width: '150',
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },
        render: rowData =>
          (rowData.shipDate) ? <span>{moment(rowData.shipDate).format('DD/MM/YYYY')}</span> : ''
      },
      {
        title: t('Ngày làm xét nghiệm'),
        field: 'testingDate',
        width: '150',
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },

        render: rowData =>
          (rowData.testingDate) ? <span>{moment(rowData.testingDate).format('DD/MM/YYYY')}</span> : ''
      },
      {
        title: t('Ngày có kết quả'),
        field: 'resultDate',
        width: '150',
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },

        render: rowData =>
          (rowData.resultDate) ? <span>{moment(rowData.resultDate).format('DD/MM/YYYY')}</span> : ''
      },
      {
        title: t('Kết quả mẫu'),
        field: 'sampleResult',
        width: '150',
        render: rowData => {
          if (rowData.sampleResult == 'Positive') return <span>Dương tính</span>;
          else if (rowData.sampleResult == 'Negative') return <span>Âm tính</span>;
          else if (rowData.sampleResult == 'Checking') return <span>Dương tính chờ xác nhận</span>;
      },
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },
      },
      {
        title: t("Đơn vị xét nghiệm"),
        field: "labTest.name",
        align: "left",
        width: "100%",
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },
      },
      {
        title: t("Đơn vị lấy mẫu"),
        field: "sampleCollectOrg.name",
        align: "left",
        width: "100%",
        headerStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
        },
        cellStyle: {
          minWidth: "150px",
          paddingLeft: "0px",
          paddingRight: "0px",
          textAlign: "left",
        },
      },
    ]
    return (
      <Dialog
        // onClose={handleClose}
        open={open}
        PaperComponent={PaperComponent}
        maxWidth={"md"}
        fullWidth
      >
        <DialogTitle style={{ cursor: "move" }} id="draggable-dialog-title">
          <span className="mb-20 styleColor">
            {t("Chọn mẫu gộp")}
          </span>
        </DialogTitle>
        <DialogContent dividers>
          <Grid container spacing={2}>
            <Grid item md={6} sm={4}>
              <Autocomplete
                options={sampleCollectOrgList}
                getOptionLabel={(option) => option.name}
                id="debug"
                onChange={(event, value) => { this.selectHealthOrganization(event, value, "collectSampleOrg") }}
                renderInput={(params) => <TextField {...params} label="Tìm kiếm đơn vị lấy mẫu" />}
              />
            </Grid>
            <Grid item md={6} xs={12}>
              <FormControl fullWidth>
                <InputLabel htmlFor="standard-adornment-amount">
                  {t("EnterSearch")}
                </InputLabel>
                <Input
                  id="standard-adornment-amount"
                  name="keyword"
                  value={keyword}
                  onKeyDown={this.handleKeyDownEnterSearch}
                  onChange={this.handleChange}
                  endAdornment={
                    <InputAdornment position="end">
                      <IconButton>
                        <SearchIcon onClick={() => this.search(keyword)} />
                      </IconButton>
                    </InputAdornment>
                  }
                />
              </FormControl>
            </Grid>
            {/* <Grid item md={4} sm={4}>
              <Autocomplete
                options={sampleSusLevel}
                getOptionLabel={(option) => option.name}
                id="debug"
                onChange={(event, value) => { this.selectSearchSample(event, value, "susLevel") }}
                renderInput={(params) => <TextField {...params} label="Tìm kiếm mức độ nghi nhiễm" />}
              />
            </Grid>
            <Grid item md={4} sm={4}>
              <Autocomplete
                options={sampleEpiFactor}
                getOptionLabel={(option) => option.name}
                id="debug"
                onChange={(event, value) => { this.selectSearchSample(event, value, "epiFactor") }}
                renderInput={(params) => <TextField {...params} label="Tìm kiếm yếu tố nguy cơ" />}
              />
            </Grid> */}
            <Grid item md={6} sm={4}>
              <MuiPickersUtilsProvider utils={DateFnsUtils}>
                <KeyboardDatePicker
                  size="small"
                  className="w-100"
                  margin="none"
                  id="date-picker-dialog"
                  label={
                    <span>
                      Từ ngày
                                        </span>
                  }
                  inputVariant="standard"
                  type="text"
                  autoOk={true}
                  format="dd/MM/yyyy"
                  inputProps={{
                    // readOnly: formReadonly.sampleDate
                  }}
                  value={fromDate ? fromDate : null}
                  onChange={(value) => this.handleDateChange(value, "fromDate")}
                  KeyboardButtonProps={{
                    'aria-label': 'change date',
                    // disabled: formReadonly.fromDate
                  }}
                />
              </MuiPickersUtilsProvider>
              <p style={{ color: '#f44336', fontSize: '0.75rem' }}>{this.state.errorDate}</p>
            </Grid>
            <Grid item md={6} sm={4}>
              <MuiPickersUtilsProvider utils={DateFnsUtils}>
                <KeyboardDatePicker
                  size="small"
                  className="w-100"
                  margin="none"
                  id="date-picker-dialog"
                  label={
                    <span>
                      Đến ngày
                                        </span>
                  }
                  inputVariant="standard"
                  type="text"
                  autoOk={true}
                  format="dd/MM/yyyy"
                  inputProps={{
                    // readOnly: formReadonly.sampleDate
                  }}
                  value={toDate ? toDate : null}
                  onChange={(value) => this.handleDateChange(value, "toDate")}
                  KeyboardButtonProps={{
                    'aria-label': 'change date',
                    // disabled: formReadonly.toDate
                  }}
                />
              </MuiPickersUtilsProvider>
              <p style={{ color: '#f44336', fontSize: '0.75rem' }}>{this.state.errorDate}</p>
            </Grid>
            <Grid item xs={12}>
              {/* <Checkbox
                onClick={this.handleClickAll}
              /> */}
              <Button
                className="mb-16 mr-16"
                variant="contained"
                color="primary"
                onClick={() => this.handleClickAll()}
              >
                 {checkAll ? "Bỏ chọn tất cả " : "Chọn tất cả "}
                ({this.state.totalElements} mẫu)
              </Button>
              <MaterialTable
                data={itemList}
                columns={columns}
                options={{
                  selection: false,
                  actionsColumnIndex: -1,
                  paging: false,
                  search: false,
                  rowStyle: rowData => ({
                    backgroundColor: (rowData.tableData.id % 2 === 1) ? '#EEE' : '#FFF',
                  }),
                  headerStyle: {
                    backgroundColor: '#358600',
                    color: '#fff',
                  },
                  padding: 'dense',
                  toolbar: false
                }}
                components={{
                  Toolbar: props => (
                    <div style={{ witdth: "100%" }}>
                      <MTableToolbar {...props} />
                    </div>
                  )
                }}
                onSelectionChange={rows => { //set
                  this.setState({ sampleCommon: rows })
                }}
                localization={{
                  body: {
                    emptyDataSourceMessage: `${t(
                      "general.emptyDataMessageTable"
                    )}`,
                  },
                }}
              />
              <TablePagination
                align="left"
                className="px-16"
                rowsPerPageOptions={[1, 2, 3, 5, 10, 25]}
                component="div"
                labelRowsPerPage={t('general.rows_per_page')}
                labelDisplayedRows={({ from, to, count }) => `${from}-${to} ${t('general.of')} ${count !== -1 ? count : `more than ${to}`}`}
                count={this.state.totalElements}
                rowsPerPage={this.state.rowsPerPage}
                page={this.state.page}
                labelRowsPerPage={t("general.rows_per_page")}
                labelDisplayedRows={({ from, to, count }) =>
                  `${from}-${to} ${t("general.of")} ${count !== -1 ? count : `more than ${to}`
                  }`
                }
                backIconButtonProps={{
                  "aria-label": "Previous Page"
                }}
                nextIconButtonProps={{
                  "aria-label": "Next Page"
                }}
                onChangePage={this.handleChangePage}
                onChangeRowsPerPage={this.setRowsPerPage}
              />
            </Grid>
          </Grid>
        </DialogContent>
        <DialogActions>
          <Button
            className="mb-16 mr-36 align-bottom"
            variant="contained"
            color="secondary"
            onClick={() => handleClose()}
          >
            {t("general.cancel")}
          </Button>
          <Button
            className="mb-16 mr-16 align-bottom"
            variant="contained"
            color="primary"
            onClick={() => handleSelect(listSampleChoose)}
          >
            {t("general.select")}
          </Button>
        </DialogActions>
      </Dialog>
    );
  }
}
export default SelectSamplePopup;
